Search.setIndex({"docnames": ["api_reference", "getting_started", "index"], "filenames": ["api_reference.rst", "getting_started.rst", "index.rst"], "titles": ["API Reference", "Getting started", "segmenteverygrain"], "terms": {"segmenteverygrain": [0, 1], "calculate_i": 0, "poly1": 0, "poly2": 0, "calcul": 0, "intersect": 0, "over": 0, "union": 0, "iou": 0, "between": 0, "two": 0, "polygon": [0, 1], "paramet": [0, 1], "The": [0, 1, 2], "first": [0, 2], "second": 0, "return": 0, "valu": 0, "type": [0, 1], "float": 0, "classify_point": 0, "feature1": 0, "feature2": 0, "x1": 0, "y1": 0, "x2": 0, "y2": 0, "classifi": 0, "point": 0, "base": [0, 1, 2], "posit": 0, "rel": 0, "line": 0, "list": [0, 1], "x": 0, "coordin": 0, "y": 0, "classif": 0, "each": [0, 1], "either": 0, "0": [0, 1], "one": 0, "side": 0, "1": [0, 1], "other": 0, "click_for_scal": 0, "event": 0, "ax": [0, 1], "handl": 0, "mous": 0, "click": [0, 2], "measur": 0, "distanc": 0, "plot": 0, "print": 0, "number": [0, 1], "pixel": [0, 1], "matplotlib": 0, "backend_bas": 0, "mouseev": 0, "object": [0, 2], "repres": 0, "collect_polygon_from_mask": 0, "label": [0, 1], "mask": [0, 1, 2], "image_pr": [0, 1], "all_grain": [0, 1], "sx": 0, "sy": 0, "min_area": [0, 1], "100": 0, "max_n_large_grain": 0, "10": [0, 1], "max_bg_fract": 0, "7": 0, "collect": 0, "from": [0, 1, 2], "append": 0, "grain": [0, 1, 2], "ndarrai": 0, "arrai": [0, 1], "imag": [0, 1, 2], "boolean": 0, "indic": 0, "region": 0, "interest": 0, "predict": [0, 1], "unet": [0, 1, 2], "model": [0, 1, 2], "result": [0, 1, 2], "vertic": 0, "int": 0, "option": 0, "minimum": 0, "area": 0, "consid": 0, "signific": 0, "default": 0, "maximum": 0, "larg": [0, 1], "allow": 0, "fraction": 0, "can": [0, 1, 2], "background": [0, 2], "updat": [0, 1], "compute_curvatur": 0, "comput": 0, "deriv": 0, "curvatur": 0, "curv": 0, "1d": 0, "unit": 0, "convert_to_large_image_coord": 0, "patch_origin": 0, "convert": 0, "patch": [0, 1, 2], "tupl": 0, "top": 0, "left": 0, "corner": 0, "create_and_train_model": 0, "train_dataset": 0, "val_dataset": 0, "test_dataset": 0, "model_fil": 0, "none": 0, "epoch": 0, "creat": [0, 1, 2], "train": [0, 1], "u": 0, "net": 0, "str": 0, "path": 0, "file": [0, 2], "contain": [0, 1], "weight": [0, 1], "tf": 0, "data": [0, 1], "dataset": [0, 2], "valid": 0, "test": [0, 1], "kera": 0, "note": 0, "function": [0, 1, 2], "loss": [0, 1], "accuraci": [0, 1], "create_labeled_imag": 0, "provid": 0, "input": [0, 1], "shape": [0, 1, 2], "numpi": [0, 1], "raster": 0, "where": 0, "assign": 0, "uniqu": 0, "mask_al": [0, 1], "binari": 0, "presenc": 0, "boundari": 0, "create_train_val_test_data": 0, "image_dir": 0, "mask_dir": 0, "augment": 0, "true": [0, 1], "split": [0, 1], "directori": 0, "bool": 0, "If": [0, 1], "appli": 0, "tensorflow": 0, "extract_patch": 0, "center": 0, "patch_siz": [0, 1], "extract": 0, "given": 0, "np": [0, 1], "which": [0, 1, 2], "size": [0, 1, 2], "assum": 0, "squar": 0, "find_connected_compon": 0, "find": 0, "connect": 0, "compon": 0, "graph": 0, "overlap": [0, 1, 2], "all": 0, "threshold": 0, "new_grain": 0, "do": [0, 1], "have": 0, "an": [0, 1], "greater": 0, "than": [0, 1], "comp": 0, "set": [0, 2], "g": [0, 1], "networkx": 0, "find_grain_size_class": 0, "grain_size_class": 0, "value1": 0, "value2": 0, "xlimit": 0, "class": 0, "rang": 0, "dict": 0, "A": 0, "dictionari": 0, "kei": 0, "ar": [0, 1, 2], "name": 0, "lower_bound": 0, "upper_bound": 0, "One": 0, "end": 0, "check": 0, "matching_class": 0, "bound": 0, "both": 0, "lower": 0, "upper": 0, "match": 0, "find_overlapping_polygon": 0, "min_overlap": 0, "4": 0, "us": [0, 1, 2], "spatial": 0, "index": 0, "overlapping_polygon": 0, "get_area_weighted_distribut": 0, "grain_siz": 0, "get_grains_from_patch": 0, "fals": [0, 1], "mark": 0, "fig": [0, 1], "figur": [0, 1], "label_grain": [0, 1], "dbs_max_dist": [0, 1], "20": [0, 1], "semant": 0, "segment": [0, 1, 2], "gener": [0, 1, 2], "prompt": [0, 2], "sam": [0, 1, 2], "2d": 0, "3d": 0, "wa": 0, "dbscan": 0, "decreas": 0, "more": 0, "longer": 0, "process": 0, "time": [0, 1], "labels_simpl": 0, "all_coord": 0, "load_and_preprocess": 0, "image_path": 0, "mask_path": 0, "load": [0, 1], "preprocess": 0, "its": 0, "correspond": 0, "whether": 0, "merge_overlapping_polygon": 0, "merg": [0, 2], "thi": [0, 1, 2], "take": 0, "It": 0, "iter": 0, "within": 0, "most": [0, 2], "similar": 0, "select": 0, "ad": [0, 2], "new": [0, 1], "onclick": 0, "coord": [0, 1], "predictor": 0, "run": [0, 1], "come": 0, "button": 0, "right": 0, "current": 0, "adjust": 0, "accordingli": 0, "possibl": [0, 2], "store": 0, "sampredictor": 0, "onclick2": 0, "grain_ind": 0, "select_onli": 0, "handler": 0, "highlight": 0, "delet": [0, 2], "onpress2": 0, "onclick_large_imag": 0, "1000": 0, "purpos": 0, "trigger": 0, "displai": 0, "user": 0, "ha": 0, "perform": 0, "around": 0, "add": 0, "3": [0, 1], "remov": 0, "last": 0, "one_point_prompt": 0, "singl": 0, "axi": 0, "contour": 0, "onpress": 0, "press": 0, "keyev": 0, "when": [0, 2], "patchify_training_data": 0, "input_dir": 0, "patch_dir": 0, "save": [0, 1, 2], "them": [0, 2], "specifi": 0, "expect": 0, "filenam": 0, "256x256": 0, "stride": 0, "128": 0, "subdirectori": 0, "doe": [0, 1, 2], "exist": 0, "warn": 0, "pick_most_similar_polygon": 0, "pick": 0, "averag": 0, "score": 0, "most_similar_polygon": 0, "plot_grain_axes_and_centroid": 0, "linewidth": 0, "markers": 0, "centroid": 0, "width": 0, "marker": 0, "plot_histogram_of_axis_length": 0, "major_axis_length": 0, "minor_axis_length": 0, "binsiz": 0, "histogram": 0, "major": 0, "minor": 0, "length": 0, "phi": 0, "scale": 0, "like": [0, 1, 2], "millimet": 0, "bin": 0, "limit": 0, "determin": [0, 2], "_subplot": 0, "axessubplot": 0, "plot_image_w_colorful_grain": 0, "cmap": 0, "viridi": 0, "plot_imag": [0, 1], "im_alpha": 0, "randomli": 0, "color": 0, "colormap": 0, "plot_images_and_label": 0, "img": 0, "third": 0, "subplot": 0, "show": 0, "overlai": 0, "predict_imag": [0, 1], "i": [0, 1], "segmant": 0, "entir": 0, "being": 0, "channel": [0, 1], "tile": 0, "predict_image_til": 0, "im_til": 0, "done": 0, "im_tile_pr": 0, "predict_large_imag": [0, 1], "fname": [0, 1], "2000": [0, 1], "300": 0, "remove_large_object": [0, 1], "locat": 0, "approach": [0, 2], "preliminari": 0, "rasterize_grain": [0, 1], "read_polygon": 0, "read": 0, "geojson": 0, "sam_segment": [0, 1], "remove_edge_grain": [0, 1], "anyth": [0, 2], "output": [0, 1], "touch": 0, "edg": 0, "veri": 0, "good": [0, 1, 2], "grain_data": [0, 1], "panda": [0, 1], "datafram": [0, 1], "properti": 0, "otherwis": 0, "save_polygon": 0, "format": 0, "two_point_prompt": 0, "weighted_crossentropi": [0, 1], "y_true": 0, "y_pred": 0, "cross": 0, "entropi": 0, "tensor": 0, "To": [1, 2], "import": 1, "seg": 1, "compil": 1, "optim": 1, "adam": 1, "metric": 1, "load_weight": 1, "checkpoint": 1, "seg_model": 1, "256": 1, "should": 1, "much": 1, "larger": 1, "2000x3000": 1, "part": 1, "avoid": 1, "long": 1, "suppos": 1, "rgb": 1, "well": [1, 2], "defin": 1, "too": 1, "small": 1, "e": 1, "onli": 1, "few": 1, "qc": [1, 2], "d": [1, 2], "befor": 1, "plt": 1, "figsiz": 1, "15": 1, "imshow": 1, "big_im_pr": 1, "scatter": 1, "c": 1, "k": 1, "xtick": 1, "ytick": 1, "low": 1, "qualiti": [1, 2], "fine": 1, "tune": 1, "train_seg_unet_model": 1, "ipynb": 1, "notebook": 1, "400": 1, "detect": [1, 2], "you": [1, 2], "want": 1, "200": 1, "just": 1, "large_imag": 1, "see": 1, "segment_every_grain": 1, "exampl": 1, "how": 1, "ing": 1, "goe": 1, "through": 1, "step": 1, "interact": 1, "need": 1, "work": [1, 2], "specif": 1, "idea": 1, "some": [1, 2], "usual": 1, "enough": 1, "so": [1, 2], "better": 1, "workflow": 1, "finetun": 1, "github": 2, "repositori": 2, "python": 2, "packag": 2, "aim": 2, "goal": 2, "develop": 2, "machin": 2, "learn": 2, "reason": 2, "job": 2, "photo": 2, "common": 2, "task": 2, "geomorpholog": 2, "sedimentari": 2, "geologi": 2, "reli": 2, "meta": 2, "get": 2, "high": 2, "outlin": 2, "howev": 2, "requir": 2, "everi": 2, "everyth": 2, "mode": 2, "tend": 2, "slow": 2, "mani": 2, "non": 2, "deal": 2, "issu": 2, "style": 2, "convolut": 2, "neural": 2, "network": 2, "pass": 2, "miss": 2, "also": 2, "includ": 2, "make": 2, "clean": 2, "up": 2, "were": 2, "automat": 2, "These": 2, "improv": 2, "pip": 2, "Or": 2, "sourc": 2, "code": 2, "git": 2, "clone": 2, "http": 2, "com": 2, "zsylvest": 2, "cd": 2, "easiest": 2, "wai": 2, "environ": 2, "yml": 2, "conda": 2, "mamba": 2, "start": 2, "api": 2, "refer": 2}, "objects": {"segmenteverygrain": [[0, 0, 1, "", "Unet"], [0, 0, 1, "", "calculate_iou"], [0, 0, 1, "", "classify_points"], [0, 0, 1, "", "click_for_scale"], [0, 0, 1, "", "collect_polygon_from_mask"], [0, 0, 1, "", "compute_curvature"], [0, 0, 1, "", "convert_to_large_image_coords"], [0, 0, 1, "", "create_and_train_model"], [0, 0, 1, "", "create_labeled_image"], [0, 0, 1, "", "create_train_val_test_data"], [0, 0, 1, "", "extract_patch"], [0, 0, 1, "", "find_connected_components"], [0, 0, 1, "", "find_grain_size_classes"], [0, 0, 1, "", "find_overlapping_polygons"], [0, 0, 1, "", "get_area_weighted_distribution"], [0, 0, 1, "", "get_grains_from_patches"], [0, 0, 1, "", "label_grains"], [0, 0, 1, "", "load_and_preprocess"], [0, 0, 1, "", "merge_overlapping_polygons"], [0, 0, 1, "", "onclick"], [0, 0, 1, "", "onclick2"], [0, 0, 1, "", "onclick_large_image"], [0, 0, 1, "", "one_point_prompt"], [0, 0, 1, "", "onpress"], [0, 0, 1, "", "onpress2"], [0, 0, 1, "", "patchify_training_data"], [0, 0, 1, "", "pick_most_similar_polygon"], [0, 0, 1, "", "plot_grain_axes_and_centroids"], [0, 0, 1, "", "plot_histogram_of_axis_lengths"], [0, 0, 1, "", "plot_image_w_colorful_grains"], [0, 0, 1, "", "plot_images_and_labels"], [0, 0, 1, "", "predict_image"], [0, 0, 1, "", "predict_image_tile"], [0, 0, 1, "", "predict_large_image"], [0, 0, 1, "", "rasterize_grains"], [0, 0, 1, "", "read_polygons"], [0, 0, 1, "", "sam_segmentation"], [0, 0, 1, "", "save_polygons"], [0, 0, 1, "", "two_point_prompt"], [0, 0, 1, "", "weighted_crossentropy"]]}, "objtypes": {"0": "py:function"}, "objnames": {"0": ["py", "function", "Python function"]}, "titleterms": {"api": 0, "refer": 0, "get": 1, "start": 1, "segmenteverygrain": 2, "instal": 2, "content": 2}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})