Search.setIndex({"docnames": ["api_reference", "getting_started", "index"], "filenames": ["api_reference.rst", "getting_started.rst", "index.rst"], "titles": ["API Reference", "Getting started", "segmenteverygrain"], "terms": {"segmenteverygrain": [0, 1], "predict_imag": [0, 1, 2], "big_im": [], "model": [0, 1, 2], "i": [0, 1, 2], "semant": 0, "segment": [0, 1, 2], "entir": 0, "imag": [0, 1, 2], "us": [0, 1, 2], "unet": [0, 1, 2], "paramet": [0, 1], "2d": 0, "3d": 0, "arrai": [0, 1], "The": [0, 1, 2], "being": 0, "can": [0, 1, 2], "have": 0, "one": 0, "more": 0, "channel": [0, 1], "tensorflow": 0, "int": 0, "size": [0, 1, 2], "squar": 0, "shape": [0, 1, 2], "tile": 0, "pixel": [0, 1], "return": 0, "result": [0, 1, 2], "input": [0, 1], "type": [0, 1], "To": [1, 2], "load": [0, 1], "import": 1, "seg": 1, "compil": 1, "optim": 1, "adam": 1, "loss": [0, 1], "weighted_crossentropi": [0, 1, 2], "metric": 1, "accuraci": [0, 1], "load_weight": 1, "checkpoint": 1, "seg_model": 1, "run": [0, 1], "an": [0, 1], "label": [0, 1], "grain": [0, 1, 2], "output": [0, 1], "image_pr": [0, 1], "256": 1, "coord": [0, 1], "label_grain": [0, 1, 2], "dbs_max_dist": [0, 1], "20": [0, 1], "0": [0, 1], "should": 1, "much": 1, "larger": 1, "than": [0, 1], "2000x3000": 1, "part": 1, "avoid": 1, "long": 1, "time": [0, 1], "suppos": 1, "numpi": [0, 1], "3": [0, 1], "rgb": 1, "well": [1, 2], "defin": 1, "too": 1, "small": 1, "e": 1, "g": [0, 1], "onli": 1, "few": 1, "predict": [0, 1], "qc": [1, 2], "d": [1, 2], "befor": 1, "sam": [0, 1, 2], "plt": 1, "figur": [0, 1], "figsiz": 1, "15": 1, "10": [0, 1], "imshow": 1, "big_im_pr": 1, "scatter": 1, "np": [0, 1], "1": [0, 1], "c": 1, "k": 1, "xtick": 1, "ytick": 1, "If": [0, 1], "low": 1, "qualiti": [1, 2], "base": [0, 1, 2], "fine": 1, "tune": 1, "train_seg_unet_model": 1, "ipynb": 1, "notebook": 1, "from": [0, 1, 2], "all_grain": [0, 1], "mask_al": [0, 1], "grain_data": [0, 1], "fig": [0, 1], "ax": [0, 1], "sam_segment": [0, 1, 2], "min_area": [0, 1], "400": [0, 1], "plot_imag": [0, 1], "true": [0, 1], "remove_edge_grain": [0, 1], "fals": [0, 1], "remove_large_object": [0, 1], "list": [0, 1], "contain": [0, 1], "polygon": [0, 1], "detect": [1, 2], "panda": [0, 1], "datafram": [0, 1], "number": [0, 1], "you": [1, 2], "want": 1, "larg": [0, 1], "predict_large_imag": [0, 1, 2], "function": [0, 1, 2], "which": [0, 1, 2], "split": [0, 1], "patch": [0, 1, 2], "each": [0, 1], "fname": [0, 1], "patch_siz": [0, 1], "2000": 1, "overlap": [0, 1, 2], "200": 1, "just": 1, "like": [0, 1, 2], "gener": [0, 1, 2], "thi": [0, 1, 2], "rasterize_grain": [0, 1, 2], "large_imag": 1, "see": 1, "segment_every_grain": 1, "exampl": 1, "how": 1, "ing": 1, "goe": 1, "through": 1, "step": 1, "interact": 1, "updat": [0, 1], "save": [0, 1, 2], "data": [0, 1], "mask": [0, 1, 2], "need": 1, "creat": [0, 1, 2], "train": [0, 1], "test": [0, 1], "doe": [0, 1, 2], "work": [1, 2], "specif": 1, "good": [0, 1, 2], "idea": 1, "some": [1, 2], "new": [0, 1], "ar": [0, 1, 2], "usual": 1, "enough": 1, "so": [1, 2], "better": 1, "workflow": 1, "do": [0, 1], "finetun": 1, "weight": [0, 1], "github": 2, "repositori": 2, "python": 2, "packag": 2, "aim": 2, "object": [0, 2], "goal": 2, "develop": 2, "machin": 2, "learn": 2, "reason": 2, "job": 2, "most": [0, 2], "photo": 2, "determin": 2, "common": 2, "task": 2, "geomorphologi": 2, "sedimentari": 2, "geologi": 2, "reli": 2, "anyth": [0, 2], "meta": 2, "get": 2, "high": 2, "outlin": 2, "howev": 2, "requir": 2, "prompt": [0, 2], "everi": 2, "when": [0, 2], "everyth": 2, "mode": 2, "tend": 2, "slow": 2, "mani": 2, "non": 2, "background": [0, 2], "deal": 2, "issu": 2, "style": 2, "convolut": 2, "neural": 2, "network": 2, "first": [0, 2], "pass": 2, "miss": 2, "approach": [0, 2], "also": 2, "includ": 2, "set": [0, 2], "make": 2, "possibl": [0, 2], "clean": 2, "up": 2, "delet": [0, 2], "merg": [0, 2], "click": [0, 2], "them": [0, 2], "ad": [0, 2], "were": 2, "automat": 2, "dataset": [0, 2], "These": 2, "improv": 2, "pip": 2, "Or": 2, "sourc": 2, "code": 2, "git": 2, "clone": 2, "http": 2, "com": 2, "zsylvest": 2, "cd": 2, "easiest": 2, "wai": 2, "environ": 2, "yml": 2, "file": [0, 2], "conda": 2, "mamba": 2, "start": 2, "api": 2, "refer": 2, "segmant": 0, "4000": 0, "locat": 0, "str": 0, "path": 0, "kera": 0, "preliminari": 0, "sampredictor": 0, "minimum": 0, "area": 0, "threshold": 0, "valid": 0, "option": 0, "default": 0, "between": 0, "A": 0, "repres": 0, "predict_image_til": [0, 2], "im_til": 0, "done": 0, "im_tile_pr": 0, "wa": 0, "float": 0, "dbscan": 0, "distanc": 0, "decreas": 0, "longer": 0, "process": 0, "labels_simpl": 0, "all_coord": 0, "coordin": 0, "one_point_prompt": [0, 2], "x": 0, "y": 0, "predictor": 0, "perform": 0, "singl": 0, "point": 0, "ndarrai": 0, "bool": 0, "whether": 0, "plot": 0, "axi": 0, "sx": 0, "contour": 0, "sy": 0, "two_point_prompt": [0, 2], "x1": 0, "y1": 0, "x2": 0, "y2": 0, "two": 0, "second": 0, "matplotlib": 0, "find_overlapping_polygon": [0, 2], "find": 0, "given": 0, "spatial": 0, "index": 0, "overlapping_polygon": 0, "tupl": 0, "indic": 0, "y_true": 0, "y_pred": 0, "calcul": 0, "cross": 0, "entropi": 0, "tensor": 0, "plot_images_and_label": [0, 2], "img": 0, "its": 0, "correspond": 0, "side": 0, "third": 0, "subplot": 0, "show": 0, "overlai": 0, "none": 0, "calculate_i": [0, 2], "poly1": 0, "poly2": 0, "intersect": 0, "over": 0, "union": 0, "iou": 0, "valu": 0, "pick_most_similar_polygon": [0, 2], "pick": 0, "similar": 0, "averag": 0, "score": 0, "most_similar_polygon": 0, "come": 0, "remov": 0, "touch": 0, "edg": 0, "veri": 0, "all": 0, "properti": 0, "otherwis": 0, "find_connected_compon": [0, 2], "connect": 0, "compon": 0, "graph": 0, "new_grain": 0, "greater": 0, "comp": 0, "where": 0, "networkx": 0, "merge_overlapping_polygon": [0, 2], "take": 0, "other": 0, "It": 0, "iter": 0, "within": 0, "select": 0, "region": 0, "raster": 0, "create_labeled_imag": [0, 2], "provid": 0, "filter": [], "assign": 0, "uniqu": 0, "binari": 0, "presenc": 0, "boundari": 0, "load_and_preprocess": [0, 2], "image_path": 0, "mask_path": 0, "augment": 0, "preprocess": 0, "appli": 0, "onclick": [0, 2], "event": 0, "mous": 0, "left": 0, "button": 0, "right": 0, "current": 0, "adjust": 0, "accordingli": 0, "backend_bas": 0, "mouseev": 0, "store": 0, "onpress": [0, 2], "handl": 0, "kei": 0, "press": 0, "keyev": 0, "onclick2": [0, 2], "grain_ind": 0, "select_onli": 0, "handler": 0, "highlight": 0, "either": 0, "onpress2": [0, 2], "click_for_scal": [0, 2], "measur": 0, "print": 0, "get_grains_from_patch": [0, 2], "extract": 0, "mark": 0, "plot_image_w_colorful_grain": [0, 2], "cmap": 0, "viridi": 0, "randomli": 0, "color": 0, "name": 0, "colormap": 0, "plot_grain_axes_and_centroid": [0, 2], "linewidth": 0, "markers": 0, "centroid": 0, "width": 0, "line": 0, "marker": 0, "classify_point": [0, 2], "feature1": 0, "feature2": 0, "classifi": 0, "posit": 0, "rel": 0, "classif": 0, "compute_curvatur": [0, 2], "comput": 0, "deriv": 0, "curvatur": 0, "curv": 0, "1d": 0, "unit": 0, "min_overlap": 0, "4": 0, "extract_patch": [0, 2], "center": 0, "assum": 0, "convert_to_large_image_coord": [0, 2], "patch_origin": 0, "convert": 0, "top": 0, "corner": 0, "onclick_large_imag": [0, 2], "1000": 0, "purpos": 0, "trigger": 0, "displai": 0, "user": 0, "ha": 0, "around": 0, "note": 0, "add": 0, "last": 0, "patchify_training_data": [0, 2], "input_dir": 0, "patch_dir": 0, "specifi": 0, "directori": 0, "expect": 0, "filenam": 0, "256x256": 0, "stride": 0, "128": 0, "subdirectori": 0, "exist": 0, "match": 0, "warn": 0, "create_train_val_test_data": [0, 2], "image_dir": 0, "mask_dir": 0, "train_dataset": 0, "tf": 0, "val_dataset": 0, "test_dataset": 0, "create_and_train_model": [0, 2], "weights_dir": 0, "epoch": 0, "100": 0, "u": 0, "net": 0, "save_polygon": [0, 2], "geojson": 0, "format": 0, "read_polygon": [0, 2], "read": 0, "plot_histogram_of_axis_length": [0, 2], "major_axis_length": 0, "minor_axis_length": 0, "histogram": 0, "major": 0, "minor": 0, "length": 0, "phi": 0, "scale": 0, "_subplot": 0, "axessubplot": 0}, "objects": {"segmenteverygrain": [[0, 0, 1, "", "calculate_iou"], [0, 0, 1, "", "classify_points"], [0, 0, 1, "", "click_for_scale"], [0, 0, 1, "", "compute_curvature"], [0, 0, 1, "", "convert_to_large_image_coords"], [0, 0, 1, "", "create_and_train_model"], [0, 0, 1, "", "create_labeled_image"], [0, 0, 1, "", "create_train_val_test_data"], [0, 0, 1, "", "extract_patch"], [0, 0, 1, "", "find_connected_components"], [0, 0, 1, "", "find_overlapping_polygons"], [0, 0, 1, "", "get_grains_from_patches"], [0, 0, 1, "", "label_grains"], [0, 0, 1, "", "load_and_preprocess"], [0, 0, 1, "", "merge_overlapping_polygons"], [0, 0, 1, "", "onclick"], [0, 0, 1, "", "onclick2"], [0, 0, 1, "", "onclick_large_image"], [0, 0, 1, "", "one_point_prompt"], [0, 0, 1, "", "onpress"], [0, 0, 1, "", "onpress2"], [0, 0, 1, "", "patchify_training_data"], [0, 0, 1, "", "pick_most_similar_polygon"], [0, 0, 1, "", "plot_grain_axes_and_centroids"], [0, 0, 1, "", "plot_histogram_of_axis_lengths"], [0, 0, 1, "", "plot_image_w_colorful_grains"], [0, 0, 1, "", "plot_images_and_labels"], [0, 0, 1, "", "predict_image"], [0, 0, 1, "", "predict_image_tile"], [0, 0, 1, "", "predict_large_image"], [0, 0, 1, "", "rasterize_grains"], [0, 0, 1, "", "read_polygons"], [0, 0, 1, "", "sam_segmentation"], [0, 0, 1, "", "save_polygons"], [0, 0, 1, "", "two_point_prompt"], [0, 0, 1, "", "weighted_crossentropy"]]}, "objtypes": {"0": "py:function"}, "objnames": {"0": ["py", "function", "Python function"]}, "titleterms": {"api": 0, "refer": 0, "get": 1, "start": 1, "segmenteverygrain": 2, "instal": 2, "content": 2}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 57}, "alltitles": {"API Reference": [[0, "api-reference"]], "Getting started": [[1, "getting-started"]], "segmenteverygrain": [[2, "segmenteverygrain"]], "Installation": [[2, "installation"]], "Contents": [[2, "contents"]]}, "indexentries": {"calculate_iou() (in module segmenteverygrain)": [[0, "segmenteverygrain.calculate_iou"]], "classify_points() (in module segmenteverygrain)": [[0, "segmenteverygrain.classify_points"]], "click_for_scale() (in module segmenteverygrain)": [[0, "segmenteverygrain.click_for_scale"]], "compute_curvature() (in module segmenteverygrain)": [[0, "segmenteverygrain.compute_curvature"]], "convert_to_large_image_coords() (in module segmenteverygrain)": [[0, "segmenteverygrain.convert_to_large_image_coords"]], "create_and_train_model() (in module segmenteverygrain)": [[0, "segmenteverygrain.create_and_train_model"]], "create_labeled_image() (in module segmenteverygrain)": [[0, "segmenteverygrain.create_labeled_image"]], "create_train_val_test_data() (in module segmenteverygrain)": [[0, "segmenteverygrain.create_train_val_test_data"]], "extract_patch() (in module segmenteverygrain)": [[0, "segmenteverygrain.extract_patch"]], "find_connected_components() (in module segmenteverygrain)": [[0, "segmenteverygrain.find_connected_components"]], "find_overlapping_polygons() (in module segmenteverygrain)": [[0, "segmenteverygrain.find_overlapping_polygons"]], "get_grains_from_patches() (in module segmenteverygrain)": [[0, "segmenteverygrain.get_grains_from_patches"]], "label_grains() (in module segmenteverygrain)": [[0, "segmenteverygrain.label_grains"]], "load_and_preprocess() (in module segmenteverygrain)": [[0, "segmenteverygrain.load_and_preprocess"]], "merge_overlapping_polygons() (in module segmenteverygrain)": [[0, "segmenteverygrain.merge_overlapping_polygons"]], "onclick() (in module segmenteverygrain)": [[0, "segmenteverygrain.onclick"]], "onclick2() (in module segmenteverygrain)": [[0, "segmenteverygrain.onclick2"]], "onclick_large_image() (in module segmenteverygrain)": [[0, "segmenteverygrain.onclick_large_image"]], "one_point_prompt() (in module segmenteverygrain)": [[0, "segmenteverygrain.one_point_prompt"]], "onpress() (in module segmenteverygrain)": [[0, "segmenteverygrain.onpress"]], "onpress2() (in module segmenteverygrain)": [[0, "segmenteverygrain.onpress2"]], "patchify_training_data() (in module segmenteverygrain)": [[0, "segmenteverygrain.patchify_training_data"]], "pick_most_similar_polygon() (in module segmenteverygrain)": [[0, "segmenteverygrain.pick_most_similar_polygon"]], "plot_grain_axes_and_centroids() (in module segmenteverygrain)": [[0, "segmenteverygrain.plot_grain_axes_and_centroids"]], "plot_histogram_of_axis_lengths() (in module segmenteverygrain)": [[0, "segmenteverygrain.plot_histogram_of_axis_lengths"]], "plot_image_w_colorful_grains() (in module segmenteverygrain)": [[0, "segmenteverygrain.plot_image_w_colorful_grains"]], "plot_images_and_labels() (in module segmenteverygrain)": [[0, "segmenteverygrain.plot_images_and_labels"]], "predict_image() (in module segmenteverygrain)": [[0, "segmenteverygrain.predict_image"]], "predict_image_tile() (in module segmenteverygrain)": [[0, "segmenteverygrain.predict_image_tile"]], "predict_large_image() (in module segmenteverygrain)": [[0, "segmenteverygrain.predict_large_image"]], "rasterize_grains() (in module segmenteverygrain)": [[0, "segmenteverygrain.rasterize_grains"]], "read_polygons() (in module segmenteverygrain)": [[0, "segmenteverygrain.read_polygons"]], "sam_segmentation() (in module segmenteverygrain)": [[0, "segmenteverygrain.sam_segmentation"]], "save_polygons() (in module segmenteverygrain)": [[0, "segmenteverygrain.save_polygons"]], "two_point_prompt() (in module segmenteverygrain)": [[0, "segmenteverygrain.two_point_prompt"]], "weighted_crossentropy() (in module segmenteverygrain)": [[0, "segmenteverygrain.weighted_crossentropy"]]}})